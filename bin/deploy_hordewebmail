#!/bin/sh

# TODO: THIS IS A WORK IN PROGRESS

######################################################################
# Script version is yymmdd-HHMMSS in UTC, date -u +%y%m%d-%H%M%S
######################################################################
SCRIPTVERSION=150610-054610

if [ "x" == "x$FQDN" ]; then
    echo "Please set or export variable FQDN" 2>&1
    exit 1
fi

pkg install -y horde-webmail \
lang/php56 \
php56-ctype \
php56-fileinfo \
php56-pdo \
php56-pdo_pgsql \
php56-tidy \
pecl-geoip \
pecl-imagick \
pecl-pam \
nginx

nginx-config-sites-enabled
cat /usr/local/etc/nginx/sites-available/example-horde | sed "s/localhost.my.domain/${FQDN}/" >/usr/local/etc/nginx/sites-enabled/horde

sysrc nginx_enable="YES"
sysrc php_fpm_enable="YES"

service php-fpm start
service nginx start

echo
echo Visit https://${FQDN}/horde/test.php
