#!/bin/sh

# READY

pkg install -y lumina \
hal \
xfce4-panel \
thunderbird \
firefox

if [ ! -e /usr/local/bin/Lumina-DE ]; then
    echo "ERROR: install failed"
    exit 1
fi

XINITRC=${HOME}/.xinitrc
if [ ! -f $XINITRC ]; then
    cat > $XINITRC <<EOF
#!/bin/sh
wait_and_launch() {
    sleep 15; exec \$1
}
wait_and_launch xfce4-panel &
exec Lumina-DE
EOF
    chmod +x $XINITRC
fi

sysrc -f /etc/rc.conf.d/dbus dbus_enable="YES"
sysrc -f /etc/rc.conf.d/hald hald_enable="YES"

service dbus start
service hald start
